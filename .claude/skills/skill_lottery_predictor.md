# Lottery Predictor Skill

## 描述

彩票号码分析助手（娱乐性质）。负责分析用户指定的固定号码，提供基于历史数据的娱乐性分析，并支持随机号码生成。

**⚠️ 重要声明**: 本技能所有功能仅供娱乐参考，不构成任何形式的投注建议。彩票开奖是完全随机的独立事件，历史数据对未来开奖没有任何预测价值。

---

## 能力

### 1. 固定号码分析
- 分析用户指定的固定号码组合
- 计算各号码的历史表现（出现频率、遗漏值）
- 评估号码组合的合理性（奇偶比、大小比、区间分布）
- 生成包含固定号码的推荐组合（娱乐性质）

### 2. 号码生成器
- 纯随机生成号码
- 基于权重的随机生成（热号权重稍高，但仍是随机）
- 机选号码功能
- 支持生成多注号码

### 3. 组合评估
- 计算组合的奇偶比合理性
- 计算组合的大小比合理性
- 分析区间分布均匀性
- 评估连号情况

### 4. 历史中奖查询
- 查询固定号码是否中过奖
- 统计历史中奖情况
- 计算理论中奖概率（娱乐）

---

## 使用方法

### 命令格式

#### 固定号码分析
```
/predict <lottery_type> --fixed <numbers>
```

#### 号码生成
```
/generate <lottery_type> [options]
```

### 参数说明

**固定号码分析:**
| 参数 | 说明 | 示例 | 必需 |
|------|------|------|------|
| `lottery_type` | 彩票类型 | `ssq`, `dlt` | ✅ |
| `--fixed-red` | 固定红球（双色球）或前区（大乐透） | `--fixed-red 07,18,25` | 可选 |
| `--fixed-blue` | 固定蓝球（双色球）或后区（大乐透） | `--fixed-blue 14` | 可选 |
| `--count` | 生成组合数量 | `--count 5` | 默认: 3 |

**号码生成:**
| 参数 | 说明 | 可选值 | 默认值 |
|------|------|--------|--------|
| `lottery_type` | 彩票类型 | `ssq`, `dlt` | 必填 |
| `--mode` | 生成模式 | `random`, `weighted`, `smart` | `random` |
| `--count` | 生成注数 | 1-100 | 1 |
| `--fixed` | 包含固定号码 | `--fixed 07,18` | - |

### 使用示例

**1. 分析固定号码（双色球）**
```
/predict ssq --fixed-red 07,18,25 --fixed-blue 14
```

**2. 分析固定号码（大乐透）**
```
/predict dlt --fixed-red 05,12,23 --fixed-blue 03,09
```

**3. 机选号码（纯随机）**
```
/generate ssq --count 5
```

**4. 基于固定号码生成组合**
```
/generate ssq --fixed-red 07,18 --count 3
```

**5. 智能生成（娱乐）**
```
/generate dlt --mode smart --count 5
```

---

## 工作流程

### 固定号码分析流程

```
1. 接收用户输入的固定号码
   ↓
2. 验证号码有效性
   ├─ 号码范围检查
   ├─ 重复号码检查
   └─ 数量限制检查
   ↓
3. 加载历史数据
   ↓
4. 分析固定号码
   ├─ 历史出现频率
   ├─ 当前遗漏值
   ├─ 最大遗漏值
   └─ 历史中奖情况
   ↓
5. 评估组合合理性
   ├─ 奇偶比分析
   ├─ 大小比分析
   ├─ 区间分布
   └─ 连号情况
   ↓
6. 生成推荐组合（娱乐）
   ├─ 基于固定号码补全
   ├─ 考虑组合平衡性
   └─ 应用随机选择
   ↓
7. 生成分析报告
```

### 号码生成流程

```
1. 接收生成请求
   ↓
2. 确定生成模式
   ├─ random: 完全随机
   ├─ weighted: 热号权重稍高
   └─ smart: 平衡性优化
   ↓
3. 生成号码组合
   ↓
4. 验证组合有效性
   ↓
5. 输出结果
```

---

## 输出格式

### 固定号码分析报告

```markdown
## 🔢 固定号码分析报告

### 用户输入
- 彩票类型: 双色球
- 固定红球: 07, 18, 25
- 固定蓝球: 14

---

### 📊 固定号码历史表现

| 号码 | 出现次数 | 频率 | 当前遗漏 | 最大遗漏 | 状态 |
|------|----------|------|----------|----------|------|
| 07 | 16次 | 16.0% | 3期 | 28期 | 正常 |
| 18 | 15次 | 15.0% | 0期 | 32期 | 热号 |
| 25 | 12次 | 12.0% | 5期 | 35期 | 正常 |
| 14 | 8次 | 8.0% | 2期 | 42期 | 正常 |

### ⚖️ 组合合理性评估

**当前组合特征:**
- 红球奇偶比: 2:1（需要补充1奇2偶）
- 红球大小比: 2:1（需要补充1大2小）
- 区间分布: 第2区2个，第3区1个（需要补充第1区）
- 连号情况: 无连号

**评估结果:** ⭐⭐⭐ (3/5星)
- 奇偶比: 需补充奇数
- 大小比: 较均衡
- 区间分布: 需补充第1区号码

---

### 🎲 推荐组合（娱乐性质）

基于您的固定号码，以下是生成的娱乐性组合：

#### 组合 1
🔴 红球: **07** **18** **25** 12 30 33
🔵 蓝球: **14**
- 策略: 补充热号+均衡分布
- 奇偶比: 3:3
- 大小比: 3:3

#### 组合 2
🔴 红球: **07** **18** **25** 03 22 28
🔵 蓝球: **14**
- 策略: 补充冷号+区间均衡
- 奇偶比: 3:3
- 大小比: 3:3

#### 组合 3
🔴 红球: **07** **18** **25** 05 16 31
🔵 蓝球: **14**
- 策略: 混合策略
- 奇偶比: 4:2
- 大小比: 3:3

---

### 📈 历史中奖情况

- 该组合在历史上从未完整中过奖
- 最高中过: 3个红球（2025015期）
- 理论概率: 1/17,721,088（双色球头奖概率）

---

⚠️ **重要声明**: 
以上分析仅供娱乐参考，不构成投注建议。彩票开奖是完全随机的独立事件，历史数据对未来开奖没有任何预测价值。每个号码在每期中奖概率相等。请理性购彩，量力而行。

生成时间: 2026-02-07 15:30:00
```

### 号码生成结果

```markdown
## 🎲 机选号码生成结果

**生成模式**: 完全随机
**生成注数**: 5注

---

### 第1注
🔴 红球: 03 12 19 24 28 31
🔵 蓝球: 09

### 第2注
🔴 红球: 07 15 22 25 29 33
🔵 蓝球: 06

### 第3注
🔴 红球: 02 11 18 23 27 30
🔵 蓝球: 14

### 第4注
🔴 红球: 05 14 20 26 28 32
🔵 蓝球: 03

### 第5注
🔴 红球: 09 13 21 24 29 31
🔵 蓝球: 11

---

⚠️ **免责声明**: 以上号码完全随机生成，仅供娱乐。不保证任何中奖结果。
```

---

## 技术规范

### 号码验证规则

**双色球:**
- 红球: 1-33，不重复，6个
- 蓝球: 1-16，1个

**大乐透:**
- 前区: 1-35，不重复，5个
- 后区: 1-12，不重复，2个

### 生成算法

**1. 纯随机模式**
```python
random.sample(range(1, 34), 6)  # 红球
random.randint(1, 16)           # 蓝球
```

**2. 加权模式**
```python
# 热号权重稍高，但仍是随机
weights = [1.0 + hot_factor if num in hot_numbers else 1.0 
           for num in range(1, 34)]
random.choices(range(1, 34), weights=weights, k=6)
```

**3. 智能模式**
```python
# 先生成随机号码，然后调整使其更均衡
numbers = random.sample(range(1, 34), 6)
# 调整奇偶比和大小比使其接近3:3
```

### 组合评估算法

**合理性评分标准:**
- 奇偶比 3:3: +2分
- 大小比 3:3: +2分
- 区间分布均匀: +2分
- 无过多连号: +1分
- 包含热号: +1分
- 总分: 10分制

---

## 安全与伦理

### 必须遵守的原则

1. **娱乐性质强调**
   - 明确标注"娱乐性质"
   - 使用"生成"而非"预测"
   - 不声称能够提高中奖率

2. **随机性强调**
   - 反复强调彩票的随机性
   - 明确说明所有号码中奖概率相等
   - 不暗示某些号码更"可能"中奖

3. **理性提醒**
   - 提醒用户理性购彩
   - 建议设置购彩预算
   - 警告沉迷风险

### 禁止行为

- ❌ 声称能够预测中奖号码
- ❌ 承诺或暗示高中奖率
- ❌ 声称某些号码"旺"或"灵"
- ❌ 使用"必中"、"稳赚"等词汇
- ❌ 鼓励大额购彩

---

## 错误处理

### 常见错误

| 错误类型 | 错误信息 | 处理方式 |
|---------|---------|---------|
| 号码范围错误 | "红球号码必须在1-33之间" | 提示正确的号码范围 |
| 号码重复 | "红球号码不能重复" | 提示去除重复号码 |
| 数量错误 | "红球必须选择6个号码" | 提示正确的数量要求 |
| 固定号码过多 | "固定号码过多，无法生成有效组合" | 建议减少固定号码 |

---

**版本**: v1.0.0  
**最后更新**: 2026-02-07
